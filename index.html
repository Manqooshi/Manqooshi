<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <!-- Your existing head content remains the same until the closing </style> tag -->
    <!-- Add this new style for the admin panel -->
    <style>
        /* Admin Panel Styles */
        #admin-panel {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.9);
            z-index: 1000;
            padding: 20px;
            overflow-y: auto;
            color: white;
        }
        
        .admin-container {
            max-width: 1000px;
            margin: 0 auto;
            background-color: #222;
            padding: 20px;
            border-radius: 10px;
        }
        
        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #444;
        }
        
        .admin-title {
            color: var(--secondary-yellow);
            font-size: 1.8rem;
        }
        
        .close-admin {
            background: var(--primary-red);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
        }
        
        .category-editor {
            margin-bottom: 30px;
            background-color: #333;
            padding: 15px;
            border-radius: 8px;
        }
        
        .category-title {
            color: var(--secondary-yellow);
            margin-bottom: 15px;
            font-size: 1.4rem;
        }
        
        .items-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
        }
        
        .item-editor {
            background-color: #444;
            padding: 15px;
            border-radius: 8px;
        }
        
        .form-group {
            margin-bottom: 10px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: #ddd;
        }
        
        .form-group input, 
        .form-group textarea {
            width: 100%;
            padding: 8px;
            border-radius: 4px;
            border: 1px solid #666;
            background-color: #555;
            color: white;
        }
        
        .form-group textarea {
            min-height: 60px;
        }
        
        .admin-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        
        .admin-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }
        
        .save-btn {
            background-color: var(--secondary-yellow);
            color: #333;
        }
        
        .export-btn {
            background-color: var(--primary-red);
            color: white;
        }
        
        .admin-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: var(--cart-blue);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            z-index: 999;
        }
        
        .json-export {
            width: 100%;
            height: 200px;
            background-color: #333;
            color: #0f0;
            font-family: monospace;
            padding: 10px;
            border-radius: 5px;
            margin-top: 20px;
            white-space: pre;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <!-- Your existing body content remains the same until the closing </footer> tag -->

    <!-- Add this admin toggle button -->
    <div class="admin-toggle" id="adminToggle">⚙️</div>
    
    <!-- Add this admin panel at the end of body -->
    <div id="admin-panel">
        <div class="admin-container">
            <div class="admin-header">
                <h2 class="admin-title">لوحة تحكم القائمة</h2>
                <button class="close-admin" id="closeAdmin">إغلاق</button>
            </div>
            
            <div id="category-editors">
                <!-- Categories will be added here dynamically -->
            </div>
            
            <div class="admin-buttons">
                <button class="admin-btn save-btn" id="saveChanges">حفظ التغييرات</button>
                <button class="admin-btn export-btn" id="exportJson">تصدير JSON</button>
            </div>
            
            <div class="json-export-container" style="display: none;">
                <h3>نسخ JSON لتحديث الموقع:</h3>
                <textarea class="json-export" id="jsonExport" readonly></textarea>
                <p>انسخ هذا النص واستبدل به محتوى الـ JSON في ملف HTML الخاص بك</p>
            </div>
        </div>
    </div>

    <!-- Your existing script tag remains the same until the closing </script> tag -->
    <!-- Add this new script for admin functionality -->
    <script>
        // =============================================
        // Admin Panel Functionality
        // =============================================
        
        // Menu data structure (embedded in the HTML)
        const menuData = {
            categories: [
                {
                    id: "manaqeesh",
                    name: "المناقيش",
                    items: [
                        {
                            id: "1",
                            name: "منقوشة زعتر",
                            description: "عجينة رقيقة مغطاة بزعتر ممزوج بزيت الزيتون والسمسم",
                            price: 12,
                            image: "https://images.unsplash.com/photo-1601050690597-df0568f70950?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80"
                        },
                        // Add all other items in the same format
                        {
                            id: "2",
                            name: "منقوشة جبنة",
                            description: "عجينة رقيقة مغطاة بمزيج من الجبنة الذائبة",
                            price: 15,
                            image: "https://images.unsplash.com/photo-1601050690775-6b2a0a4b0e2b?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80"
                        }
                    ]
                },
                // Add all other categories in the same format
                {
                    id: "sandwiches",
                    name: "سندويشات",
                    items: [
                        {
                            id: "5",
                            name: "سندويش شاورما دجاج",
                            description: "شاورما دجاج مع خضار طازجة وصلصة الثوم",
                            price: 16,
                            image: "https://images.unsplash.com/photo-1546069901-ba9599a7e63c?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80"
                        }
                    ]
                }
            ]
        };

        // Initialize admin panel
        const adminToggle = document.getElementById('adminToggle');
        const adminPanel = document.getElementById('admin-panel');
        const closeAdmin = document.getElementById('closeAdmin');
        const categoryEditors = document.getElementById('category-editors');
        const saveChangesBtn = document.getElementById('saveChanges');
        const exportJsonBtn = document.getElementById('exportJson');
        const jsonExportContainer = document.querySelector('.json-export-container');
        const jsonExport = document.getElementById('jsonExport');

        // Toggle admin panel
        adminToggle.addEventListener('click', () => {
            adminPanel.style.display = 'block';
            renderAdminPanel();
        });

        closeAdmin.addEventListener('click', () => {
            adminPanel.style.display = 'none';
        });

        // Render admin panel with editable fields
        function renderAdminPanel() {
            categoryEditors.innerHTML = '';
            
            menuData.categories.forEach(category => {
                const categoryEditor = document.createElement('div');
                categoryEditor.className = 'category-editor';
                
                categoryEditor.innerHTML = `
                    <h3 class="category-title">${category.name}</h3>
                    <div class="items-container" id="items-${category.id}"></div>
                    <button class="admin-btn" onclick="addNewItem('${category.id}')" style="background-color: #2a9d8f; margin-top: 10px;">
                        + إضافة عنصر جديد
                    </button>
                `;
                
                categoryEditors.appendChild(categoryEditor);
                
                // Render items for this category
                const itemsContainer = document.getElementById(`items-${category.id}`);
                category.items.forEach(item => {
                    itemsContainer.appendChild(createItemEditor(category.id, item));
                });
            });
        }

        // Create item editor element
        function createItemEditor(categoryId, item) {
            const itemEditor = document.createElement('div');
            itemEditor.className = 'item-editor';
            itemEditor.dataset.id = item.id;
            
            itemEditor.innerHTML = `
                <div class="form-group">
                    <label>اسم العنصر:</label>
                    <input type="text" value="${item.name}" class="item-name">
                </div>
                <div class="form-group">
                    <label>الوصف:</label>
                    <textarea class="item-description">${item.description}</textarea>
                </div>
                <div class="form-group">
                    <label>السعر (ر.س):</label>
                    <input type="number" value="${item.price}" class="item-price" step="0.1">
                </div>
                <div class="form-group">
                    <label>رابط الصورة:</label>
                    <input type="text" value="${item.image}" class="item-image">
                </div>
                <div style="display: flex; justify-content: space-between;">
                    <button class="admin-btn" onclick="updateItem('${categoryId}', '${item.id}')" style="background-color: var(--secondary-yellow);">
                        تحديث
                    </button>
                    <button class="admin-btn" onclick="removeItem('${categoryId}', '${item.id}')" style="background-color: var(--primary-red);">
                        حذف
                    </button>
                </div>
            `;
            
            return itemEditor;
        }

        // Add new item to category
        function addNewItem(categoryId) {
            const category = menuData.categories.find(c => c.id === categoryId);
            if (!category) return;
            
            const newId = Date.now().toString(); // Generate unique ID
            const newItem = {
                id: newId,
                name: "عنصر جديد",
                description: "وصف العنصر",
                price: 0,
                image: ""
            };
            
            category.items.push(newItem);
            
            // Add to UI
            const itemsContainer = document.getElementById(`items-${categoryId}`);
            itemsContainer.appendChild(createItemEditor(categoryId, newItem));
        }

        // Update item
        function updateItem(categoryId, itemId) {
            const category = menuData.categories.find(c => c.id === categoryId);
            if (!category) return;
            
            const item = category.items.find(i => i.id === itemId);
            if (!item) return;
            
            const itemEditor = document.querySelector(`.item-editor[data-id="${itemId}"]`);
            
            item.name = itemEditor.querySelector('.item-name').value;
            item.description = itemEditor.querySelector('.item-description').value;
            item.price = parseFloat(itemEditor.querySelector('.item-price').value);
            item.image = itemEditor.querySelector('.item-image').value;
            
            // Update the main menu display
            updateMenuDisplay();
        }

        // Remove item
        function removeItem(categoryId, itemId) {
            const category = menuData.categories.find(c => c.id === categoryId);
            if (!category) return;
            
            category.items = category.items.filter(i => i.id !== itemId);
            
            // Remove from UI
            const itemEditor = document.querySelector(`.item-editor[data-id="${itemId}"]`);
            if (itemEditor) {
                itemEditor.remove();
            }
            
            // Update the main menu display
            updateMenuDisplay();
        }

        // Save changes to localStorage
        saveChangesBtn.addEventListener('click', () => {
            localStorage.setItem('menuData', JSON.stringify(menuData));
            alert('تم حفظ التغييرات بنجاح!');
            updateMenuDisplay();
        });

        // Export JSON
        exportJsonBtn.addEventListener('click', () => {
            jsonExport.value = JSON.stringify(menuData, null, 2);
            jsonExportContainer.style.display = 'block';
        });

        // Update the main menu display
        function updateMenuDisplay() {
            // This will regenerate the entire menu based on the current menuData
            // You'll need to implement this based on your existing menu rendering logic
            // For now, we'll just reload the page to see changes
            location.reload();
        }

        // Initialize
        renderAdminPanel();
    </script>
</body>
</html>
